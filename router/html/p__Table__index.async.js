"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[311],{49576:function(Ue,G,i){i.r(G),i.d(G,{default:function(){return Ce}});var A={};i.r(A),i.d(A,{addUser:function(){return _},deleteUser:function(){return ae},getUserDetail:function(){return ee},modifyUser:function(){return re},queryUserList:function(){return X}});var W=i(5574),b=i.n(W),Y=i(15009),s=i.n(Y),q=i(97857),h=i.n(q),H=i(99289),v=i.n(H),S=i(90905);function X(l,e){return $.apply(this,arguments)}function $(){return $=v()(s()().mark(function l(e,n){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,S.request)("/api/v1/queryUserList",h()({method:"GET",params:h()({},e)},n||{})));case 1:case"end":return t.stop()}},l)})),$.apply(this,arguments)}function _(l,e){return B.apply(this,arguments)}function B(){return B=v()(s()().mark(function l(e,n){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,S.request)("/api/v1/user",h()({method:"POST",headers:{"Content-Type":"application/json"},data:e},n||{})));case 1:case"end":return t.stop()}},l)})),B.apply(this,arguments)}function ee(l,e){return R.apply(this,arguments)}function R(){return R=v()(s()().mark(function l(e,n){var u;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=e.userId,r.abrupt("return",(0,S.request)("/api/v1/user/".concat(u),h()({method:"GET",params:h()({},e)},n||{})));case 2:case"end":return r.stop()}},l)})),R.apply(this,arguments)}function re(l,e,n){return V.apply(this,arguments)}function V(){return V=v()(s()().mark(function l(e,n,u){var t;return s()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.userId,d.abrupt("return",(0,S.request)("/api/v1/user/".concat(t),h()({method:"PUT",headers:{"Content-Type":"application/json"},params:h()({},e),data:n},u||{})));case 2:case"end":return d.stop()}},l)})),V.apply(this,arguments)}function ae(l,e){return L.apply(this,arguments)}function L(){return L=v()(s()().mark(function l(e,n){var u;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=e.userId,r.abrupt("return",(0,S.request)("/api/v1/user/".concat(u),h()({method:"DELETE",params:h()({},e)},n||{})));case 2:case"end":return r.stop()}},l)})),L.apply(this,arguments)}var ne={UserController:A},m=i(34521),F=i(16536),ue=i(27049),Z=i(71577),te=i(63463),w=i(67294),O=i(85402),a=i(85893),se=function(e){var n=e.modalVisible,u=e.onCancel;return(0,a.jsx)(O.Z,{destroyOnClose:!0,title:"\u65B0\u5EFA",width:420,visible:n,onCancel:function(){return u()},footer:null,children:e.children})},le=se,ie=function(e){return(0,a.jsxs)(m.L05,{stepsProps:{size:"small"},stepsFormRender:function(u,t){return(0,a.jsx)(O.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",visible:e.updateModalVisible,footer:t,onCancel:function(){return e.onCancel()},children:u})},onFinish:e.onSubmit,children:[(0,a.jsxs)(m.L05.StepForm,{initialValues:{name:e.values.name,nickName:e.values.nickName},title:"\u57FA\u672C\u4FE1\u606F",children:[(0,a.jsx)(m.VaQ,{width:"md",name:"name",label:"\u89C4\u5219\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]}),(0,a.jsx)(m.$JJ,{name:"desc",width:"md",label:"\u89C4\u5219\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01",min:5}]})]}),(0,a.jsxs)(m.L05.StepForm,{initialValues:{target:"0",template:"0"},title:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027",children:[(0,a.jsx)(m._IT,{width:"md",name:"target",label:"\u76D1\u63A7\u5BF9\u8C61",valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,a.jsx)(m._IT,{width:"md",name:"template",label:"\u89C4\u5219\u6A21\u677F",valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,a.jsx)(m.$Oj.Group,{name:"type",width:"md",label:"\u89C4\u5219\u7C7B\u578B",options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,a.jsxs)(m.L05.StepForm,{initialValues:{type:"1",frequency:"month"},title:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F",children:[(0,a.jsx)(m.Gal,{name:"time",label:"\u5F00\u59CB\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"}]}),(0,a.jsx)(m._IT,{name:"frequency",label:"\u76D1\u63A7\u5BF9\u8C61",width:"xs",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},de=ie,T=ne.UserController,ce=T.addUser,oe=T.queryUserList,me=T.deleteUser,pe=T.modifyUser,fe=function(){var l=v()(s()().mark(function e(n){var u;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=F.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),r.prev=1,r.next=4,ce(h()({},n));case 4:return u(),F.ZP.success("\u6DFB\u52A0\u6210\u529F"),r.abrupt("return",!0);case 9:return r.prev=9,r.t0=r.catch(1),u(),F.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),r.abrupt("return",!1);case 14:case"end":return r.stop()}},e,null,[[1,9]])}));return function(n){return l.apply(this,arguments)}}(),ve=function(){var l=v()(s()().mark(function e(n){var u;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=F.ZP.loading("\u6B63\u5728\u914D\u7F6E"),r.prev=1,r.next=4,pe({userId:n.id||""},{name:n.name||"",nickName:n.nickName||"",email:n.email||""});case 4:return u(),F.ZP.success("\u914D\u7F6E\u6210\u529F"),r.abrupt("return",!0);case 9:return r.prev=9,r.t0=r.catch(1),u(),F.ZP.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),r.abrupt("return",!1);case 14:case"end":return r.stop()}},e,null,[[1,9]])}));return function(n){return l.apply(this,arguments)}}(),he=function(){var l=v()(s()().mark(function e(n){var u,t;return s()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(u=F.ZP.loading("\u6B63\u5728\u5220\u9664"),n){d.next=3;break}return d.abrupt("return",!0);case 3:return d.prev=3,d.next=6,me({userId:((t=n.find(function(I){return I.id}))===null||t===void 0?void 0:t.id)||""});case 6:return u(),F.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),d.abrupt("return",!0);case 11:return d.prev=11,d.t0=d.catch(3),u(),F.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),d.abrupt("return",!1);case 16:case"end":return d.stop()}},e,null,[[3,11]])}));return function(n){return l.apply(this,arguments)}}(),ye=function(){var e=(0,w.useState)(!1),n=b()(e,2),u=n[0],t=n[1],r=(0,w.useState)(!1),d=b()(r,2),I=d[0],P=d[1],Fe=(0,w.useState)({}),N=b()(Fe,2),D=N[0],k=N[1],j=(0,w.useRef)(),ge=(0,w.useState)(),J=b()(ge,2),y=J[0],we=J[1],je=(0,w.useState)([]),Q=b()(je,2),E=Q[0],z=Q[1],M=[{title:"\u540D\u79F0",dataIndex:"name",tip:"\u540D\u79F0\u662F\u552F\u4E00\u7684 key",formItemProps:{rules:[{required:!0,message:"\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u6635\u79F0",dataIndex:"nickName",valueType:"text"},{title:"\u6027\u522B",dataIndex:"gender",hideInForm:!0,valueEnum:{0:{text:"\u7537",status:"MALE"},1:{text:"\u5973",status:"FEMALE"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(o,c){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{onClick:function(){P(!0),k(c)},children:"\u914D\u7F6E"}),(0,a.jsx)(ue.Z,{type:"vertical"}),(0,a.jsx)("a",{href:"",children:"\u8BA2\u9605\u8B66\u62A5"})]})}}];return(0,a.jsxs)(m._zJ,{header:{title:"CRUD \u793A\u4F8B"},children:[(0,a.jsx)(m.QVr,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:j,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,a.jsx)(Z.Z,{type:"primary",onClick:function(){return t(!0)},children:"\u65B0\u5EFA"},"1")]},request:function(){var p=v()(s()().mark(function o(c,C,g){var f,x,K;return s()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,oe(h()(h()({},c),{},{sorter:C,filter:g}));case 2:return f=U.sent,x=f.data,K=f.success,U.abrupt("return",{data:(x==null?void 0:x.list)||[],success:K});case 6:case"end":return U.stop()}},o)}));return function(o,c,C){return p.apply(this,arguments)}}(),columns:M,rowSelection:{onChange:function(o,c){return z(c)}}}),(E==null?void 0:E.length)>0&&(0,a.jsxs)(m.Scc,{extra:(0,a.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,a.jsx)("a",{style:{fontWeight:600},children:E.length})," ","\u9879\xA0\xA0"]}),children:[(0,a.jsx)(Z.Z,{onClick:v()(s()().mark(function p(){var o,c;return s()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,he(E);case 2:z([]),(o=j.current)===null||o===void 0||(c=o.reloadAndRest)===null||c===void 0||c.call(o);case 4:case"end":return g.stop()}},p)})),children:"\u6279\u91CF\u5220\u9664"}),(0,a.jsx)(Z.Z,{type:"primary",children:"\u6279\u91CF\u5BA1\u6279"})]}),(0,a.jsx)(le,{onCancel:function(){return t(!1)},modalVisible:u,children:(0,a.jsx)(m.QVr,{onSubmit:function(){var p=v()(s()().mark(function o(c){var C;return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,fe(c);case 2:C=f.sent,C&&(t(!1),j.current&&j.current.reload());case 4:case"end":return f.stop()}},o)}));return function(o){return p.apply(this,arguments)}}(),rowKey:"id",type:"form",columns:M})}),D&&Object.keys(D).length?(0,a.jsx)(de,{onSubmit:function(){var p=v()(s()().mark(function o(c){var C;return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,ve(c);case 2:C=f.sent,C&&(P(!1),k({}),j.current&&j.current.reload());case 4:case"end":return f.stop()}},o)}));return function(o){return p.apply(this,arguments)}}(),onCancel:function(){P(!1),k({})},updateModalVisible:I,values:D}):null,(0,a.jsx)(te.Z,{width:600,visible:!!y,onClose:function(){we(void 0)},closable:!1,children:(y==null?void 0:y.name)&&(0,a.jsx)(m.vYc,{column:2,title:y==null?void 0:y.name,request:v()(s()().mark(function p(){return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",{data:y||{}});case 1:case"end":return c.stop()}},p)})),params:{id:y==null?void 0:y.name},columns:M})})]})},Ce=ye}}]);
